{% for post in linkslist | reverse %}
  <article class="mb-3 mw-40rem">
    <h3><a href="{{ post.data.url }}" class="postlist-link">{% if post.data.title %}{{ post.data.title }}{% else %}<code>{{ post.data.url }}</code>{% endif %}</a></h3>
    {{ post.templateContent | safe }}
    <time class="postlist-date" datetime="{{ post.date | htmlDateString }}">Added {{ post.date | readableDateTime }}</time>
    {% for tag in post.data.tags %}
      {%- if tag != "links" -%}
        {% set tagUrl %}/tags/{{ tag }}/{% endset %}
        <a href="{{ tagUrl | url }}" class="tag">{{ tag }}</a>
      {%- endif -%}
    {% endfor %}
  </article>
{% endfor %}

<style>
h3 {
  margin: 0 0 0.25em -0.25em;
  line-height: 1.3;
}

article p {
  margin-top: 0;
  margin-bottom: 0.25em;
  line-height: 1.8;
}

article time {
  font-family: sans;
}

.tag {
  text-transform: uppercase;
  font-family: sans;
  text-decoration: underline;
}
</style>

{% if build.environment == "dev" %}
<script>
(function addClickHandlers() {
  document.addEventListener('click', function(evt) {
    let target = evt.target
    let clipboardText = target.getAttribute('data-clipboard-text')

    if (!clipboardText) return

    copyToClipboard(clipboardText)
  })
})()

function copyToClipboard(str) {
  let el = document.createElement('textarea')
  el.value = str
  document.body.appendChild(el)
  el.select()
  document.execCommand('copy')
  document.body.removeChild(el)
}
</script>
{% endif %}
